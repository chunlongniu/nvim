{
  // ---------------------------
  // Python (Global Settings)
  // ---------------------------
  // 1. Tell CoC exactly where the Virtual Environment Python is
  "python.pythonPath": "${workspaceFolder}/.venv/bin/python",
  "python.venvPath": "${workspaceFolder}",

  // 2. Pyright Specifics (Top-level, do NOT put in "languageserver")
  "pyright.venvPath": ".",
  "pyright.venv": ".venv",
  "pyright.organizeimports.provider": "isort",

  // 3. Pylint Configuration
  "python.linting.enabled": true,
  "python.linting.pylintEnabled": true,
  // CRITICAL FIX: Use the Pylint inside the .venv so it sees your installed packages
  "python.linting.pylintPath": "${workspaceFolder}/.venv/bin/pylint",
  "python.formatting.provider": "black",

  "python.analysis.typeCheckingMode": "basic",
  "python.analysis.autoSearchPaths": true,
  "python.analysis.useLibraryCodeForTypes": true,

  // ---------------------------
  // Workspace ignore
  // ---------------------------
  "workspace.ignoredFolders": [
    "$HOME",
    "$HOME/.cargo/**",
    "$HOME/.rustup/**"
  ],

  // ===========================================================
  // Language Servers
  // ===========================================================
  "languageserver": {
    // ---------------------------
    // CSS
    // ---------------------------
    "css": {
      "command": "vscode-css-language-server",
      "args": ["--stdio"],
      "filetypes": ["css", "scss", "less"]
    },

    // ‚ùå REMOVED "coc-pyright" block from here.
    // It is handled by the extension and top-level settings above.

    // ---------------------------
    // Clangd
    // ---------------------------
    "coc-clangd": {
      "command": "clangd",
      "filetypes": ["c", "cpp"],
      "rootPatterns": ["compile_flags.txt", "compile_commands.json", ".git/", ".clangd"],
      "initializationOptions": {
        "clangdPath": "/usr/bin/clangd",
        "cache": { "directory": "/tmp/clangd" }
      }
    },

    // ---------------------------
    // Go
    // ---------------------------
    "go": {
      "command": "gopls",
      "filetypes": ["go"],
      "rootPatterns": ["go.mod", ".git/"],
      "trace.server": "verbose",
      "initializationOptions": {
        "staticcheck": true
      }
    },

    // ---------------------------
    // CMake & Lua (Kept as is)
    // ---------------------------
    "cmake": {
      "command": "cmake-language-server",
      "filetypes": ["cmake", "CMakeLists.txt"],
      "rootPatterns": ["CMakeLists.txt"]
    },
    "lua": {
      "command": "$HOME/.config/coc/extensions/coc-lua-data/lua-language-server/bin/lua-language-server",
      "filetypes": ["lua"],
      "rootPatterns": ["*.lua"]
    }
  }
}
